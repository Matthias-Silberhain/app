/* Reset & Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Light Theme */
    --primary-color: #4f46e5;
    --primary-dark: #4338ca;
    --secondary-color: #10b981;
    --accent-color: #f59e0b;
    --text-primary: #111827;
    --text-secondary: #6b7280;
    --bg-primary: #ffffff;
    --bg-secondary: #f9fafb;
    --bg-card: #ffffff;
    --border-color: #e5e7eb;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --radius-sm: 0.375rem;
    --radius-md: 0.5rem;
    --radius-lg: 1rem;
    --transition: all 0.3s ease;
}

[data-theme="dark"] {
    --primary-color: #6366f1;
    --primary-dark: #4f46e5;
    --secondary-color: #10b981;
    --accent-color: #f59e0b;
    --text-primary: #f9fafb;
    --text-secondary: #d1d5db;
    --bg-primary: #111827;
    --bg-secondary: #1f2937;
    --bg-card: #1f2937;
    --border-color: #374151;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: 'Inter', sans-serif;
    line-height: 1.6;
    color: var(--text-primary);
    background-color: var(--bg-primary);
    transition: var(--transition);
    overflow-x: hidden;
}

/* App Container */
.app-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    max-width: 100vw;
    position: relative;
}

/* Header Styles */
.app-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background-color: var(--bg-card);
    border-bottom: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
    backdrop-filter: blur(10px);
    background-color: rgba(var(--bg-card-rgb), 0.9);
}

.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
}

.menu-toggle {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-primary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: var(--radius-sm);
    transition: var(--transition);
}

.menu-toggle:hover {
    background-color: var(--bg-secondary);
}

.logo h1 {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary-color);
}

.logo .subtitle {
    font-size: 0.875rem;
    color: var(--text-secondary);
    text-align: center;
}

.header-actions {
    display: flex;
    gap: 0.5rem;
}

.theme-toggle, .sync-btn {
    background: none;
    border: none;
    font-size: 1.25rem;
    color: var(--text-primary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: var(--radius-sm);
    transition: var(--transition);
}

.theme-toggle:hover, .sync-btn:hover {
    background-color: var(--bg-secondary);
}

/* Sidebar Navigation */
.sidebar {
    position: fixed;
    top: 0;
    left: -300px;
    width: 280px;
    height: 100vh;
    background-color: var(--bg-card);
    border-right: 1px solid var(--border-color);
    z-index: 1100;
    transition: left 0.3s ease;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
}

.sidebar.active {
    left: 0;
}

.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 1rem;
    border-bottom: 1px solid var(--border-color);
}

.sidebar-header h3 {
    font-size: 1.125rem;
    font-weight: 600;
}

.close-menu {
    background: none;
    border: none;
    font-size: 1.25rem;
    color: var(--text-primary);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: var(--radius-sm);
}

.nav-menu {
    list-style: none;
    padding: 1rem 0;
}

.nav-menu li {
    margin-bottom: 0.25rem;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.875rem 1rem;
    color: var(--text-primary);
    text-decoration: none;
    border-radius: var(--radius-sm);
    transition: var(--transition);
    font-weight: 500;
}

.nav-link:hover {
    background-color: var(--bg-secondary);
    color: var(--primary-color);
}

.nav-link.active {
    background-color: var(--primary-color);
    color: white;
}

.nav-link i {
    width: 20px;
    text-align: center;
}

.sidebar-footer {
    padding: 1.5rem 1rem;
    border-top: 1px solid var(--border-color);
    margin-top: auto;
}

.user-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #10b981;
}

.status-indicator.online {
    background-color: #10b981;
}

.status-indicator.offline {
    background-color: #ef4444;
}

.storage-info {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.storage-bar {
    height: 4px;
    background-color: var(--bg-secondary);
    border-radius: 2px;
    margin-top: 0.5rem;
    overflow: hidden;
}

.storage-progress {
    height: 100%;
    background-color: var(--primary-color);
    width: 0%;
    transition: width 0.3s ease;
}

/* Overlay */
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1050;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
}

.overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Main Content */
.main-content {
    flex: 1;
    margin-top: 70px;
    padding: 1rem;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
}

.content-section {
    display: none;
    animation: fadeIn 0.5s ease;
}

.content-section.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Hero Section */
.hero-section {
    padding: 2rem 0;
}

.hero-content {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
}

.profile-image {
    position: relative;
    width: 150px;
    height: 150px;
    margin: 0 auto 1.5rem;
}

.profile-image img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid var(--primary-color);
}

.status-badge {
    position: absolute;
    bottom: 10px;
    right: 10px;
    width: 20px;
    height: 20px;
    background-color: #10b981;
    border: 3px solid var(--bg-card);
    border-radius: 50%;
}

.hero-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-subtitle {
    font-size: 1.25rem;
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
}

.hero-tags {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
}

.tag {
    padding: 0.5rem 1rem;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
    transition: var(--transition);
}

.tag:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.hero-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 3rem;
    flex-wrap: wrap;
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 1.75rem;
    border-radius: var(--radius-md);
    font-weight: 600;
    text-decoration: none;
    cursor: pointer;
    border: none;
    transition: var(--transition);
    font-size: 1rem;
}

.btn-primary {
    background-color: var(--primary-color);
    color: white;
}

.btn-primary:hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background-color: var(--secondary-color);
    color: white;
}

.btn-secondary:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-outline {
    background-color: transparent;
    color: var(--primary-color);
    border: 2px solid var(--primary-color);
}

.btn-outline:hover {
    background-color: var(--primary-color);
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Quick Stats */
.quick-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 1rem;
    margin-top: 3rem;
}

.stat-card {
    background-color: var(--bg-card);
    padding: 1.5rem;
    border-radius: var(--radius-lg);
    text-align: center;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: var(--transition);
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.stat-card i {
    font-size: 2rem;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
}

.stat-card h3 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
}

.stat-card p {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

/* Section Header */
.section-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--border-color);
}

.section-header h2 {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.75rem;
    font-weight: 700;
}

.section-header h2 i {
    color: var(--primary-color);
}

/* About Section */
.about-content {
    display: grid;
    gap: 2rem;
}

.about-card {
    background-color: var(--bg-card);
    padding: 1.5rem;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
}

.about-card h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--primary-color);
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 1rem;
}

.info-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
}

.info-item i {
    font-size: 1.25rem;
    color: var(--primary-color);
    margin-top: 0.25rem;
}

.info-item strong {
    display: block;
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.info-item p {
    color: var(--text-secondary);
}

/* Timeline */
.timeline {
    position: relative;
    padding-left: 2rem;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: var(--primary-color);
    opacity: 0.3;
}

.timeline-item {
    position: relative;
    margin-bottom: 2rem;
    padding-left: 1.5rem;
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: -0.5rem;
    top: 0.25rem;
    width: 1rem;
    height: 1rem;
    border-radius: 50%;
    background-color: var(--primary-color);
    border: 3px solid var(--bg-card);
}

.timeline-date {
    font-weight: 600;
    color: var(--primary-color);
    margin-bottom: 0.25rem;
}

.timeline-title {
    font-weight: 700;
    margin-bottom: 0.25rem;
}

.timeline-company {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1200;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.modal.active {
    display: flex;
    animation: fadeIn 0.3s ease;
}

.modal-content {
    background-color: var(--bg-card);
    border-radius: var(--radius-lg);
    width: 100%;
    max-width: 500px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid var(--border-color);
}

.modal-header h3 {
    font-size: 1.25rem;
    font-weight: 600;
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.25rem;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: var(--radius-sm);
}

.modal-body {
    padding: 1.5rem;
}

/* Install Prompt */
.install-prompt {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 1rem;
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    max-width: 350px;
    display: none;
}

.install-prompt.active {
    display: block;
    animation: slideInUp 0.3s ease;
}

@keyframes slideInUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.install-prompt-content {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.install-icon {
    font-size: 2rem;
    color: var(--primary-color);
}

.install-text h4 {
    font-size: 1rem;
    margin-bottom: 0.25rem;
}

.install-text p {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}

.install-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.btn-install {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
}

.btn-dismiss {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 0.875rem;
    cursor: pointer;
    padding: 0.5rem;
}

/* Toast Notifications */
.toast-container {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 1300;
}

.toast {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: 1rem;
    margin-bottom: 0.5rem;
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    max-width: 350px;
    animation: slideInRight 0.3s ease;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.toast.success {
    border-left: 4px solid #10b981;
}

.toast.error {
    border-left: 4px solid #ef4444;
}

.toast.warning {
    border-left: 4px solid #f59e0b;
}

.toast i {
    font-size: 1.25rem;
}

.toast.success i {
    color: #10b981;
}

.toast.error i {
    color: #ef4444;
}

.toast.warning i {
    color: #f59e0b;
}

.toast-content {
    flex: 1;
}

.toast-content h4 {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.toast-content p {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.toast-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    font-size: 0.875rem;
}

/* Loading Spinner */
.loading-spinner {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(var(--bg-primary), 0.9);
    z-index: 1400;
    align-items: center;
    justify-content: center;
}

.loading-spinner.active {
    display: flex;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 3px solid var(--border-color);
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Offline Indicator */
.offline-indicator {
    position: fixed;
    bottom: 1rem;
    left: 50%;
    transform: translateX(-50%);
    background-color: #ef4444;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    z-index: 1000;
    display: none;
    align-items: center;
    gap: 0.5rem;
}

.offline-indicator.active {
    display: flex;
    animation: fadeInUp 0.3s ease;
}

@keyframes fadeInUp {
    from {
        transform: translate(-50%, 100%);
        opacity: 0;
    }
    to {
        transform: translate(-50%, 0);
        opacity: 1;
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2rem;
    }
    
    .hero-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .btn {
        width: 100%;
        max-width: 300px;
        justify-content: center;
    }
    
    .quick-stats {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .modal-content {
        max-width: 90%;
    }
}

@media (max-width: 480px) {
    .hero-title {
        font-size: 1.75rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
    
    .quick-stats {
        grid-template-columns: 1fr;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
    }
    
    .install-prompt {
        left: 1rem;
        right: 1rem;
        max-width: none;
    }
}
// Main App Controller
class MatthiasApp {
    constructor() {
        this.currentSection = 'home';
        this.isOnline = navigator.onLine;
        this.isAppInstalled = false;
        this.deferredPrompt = null;
        this.notes = [];
        this.settings = {
            theme: 'light',
            notifications: true,
            syncEnabled: true,
            offlineMode: true
        };
        
        this.init();
    }
    
    init() {
        this.bindEvents();
        this.loadSettings();
        this.setupServiceWorker();
        this.setupTheme();
        this.loadNotes();
        this.checkInstallStatus();
        this.setupNetworkListener();
        this.setupSwipeGestures();
        this.setupQuickNote();
    }
    
    bindEvents() {
        // Menu toggle
        document.getElementById('menuToggle').addEventListener('click', () => this.toggleMenu());
        document.getElementById('closeMenu').addEventListener('click', () => this.toggleMenu());
        document.getElementById('overlay').addEventListener('click', () => this.toggleMenu());
        
        // Theme toggle
        document.getElementById('themeToggle').addEventListener('click', () => this.toggleTheme());
        
        // Sync button
        document.getElementById('syncButton').addEventListener('click', () => this.syncData());
        
        // Navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('href').substring(1);
                this.navigateTo(sectionId);
                this.toggleMenu();
            });
        });
        
        // Install prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            this.deferredPrompt = e;
            this.showInstallPrompt();
        });
        
        window.addEventListener('appinstalled', () => {
            this.isAppInstalled = true;
            this.hideInstallPrompt();
            this.showToast('App erfolgreich installiert!', 'success');
        });
        
        // Quick note button
        document.getElementById('quickNoteBtn')?.addEventListener('click', () => this.openQuickNoteModal());
        
        // Window events
        window.addEventListener('hashchange', () => this.handleHashChange());
        window.addEventListener('resize', () => this.handleResize());
        
        // Load initial section from hash
        this.handleHashChange();
    }
    
    toggleMenu() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const body = document.body;
        
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
        body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
        
        // Update ARIA attributes
        const isExpanded = sidebar.classList.contains('active');
        document.getElementById('menuToggle').setAttribute('aria-expanded', isExpanded);
    }
    
    toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        this.settings.theme = newTheme;
        this.saveSettings();
        
        // Update button icon
        const themeIcon = document.querySelector('#themeToggle i');
        themeIcon.className = newTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
        
        this.showToast(`Theme zu ${newTheme === 'light' ? 'Hell' : 'Dunkel'} geändert`, 'success');
    }
    
    setupTheme() {
        // Check for saved theme or prefer color scheme
        const savedTheme = localStorage.getItem('app-theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        let theme = savedTheme || (prefersDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
        this.settings.theme = theme;
        
        // Update button icon
        const themeIcon = document.querySelector('#themeToggle i');
        if (themeIcon) {
            themeIcon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
        }
    }
    
    navigateTo(sectionId) {
        // Hide current section
        const currentSection = document.querySelector('.content-section.active');
        if (currentSection) {
            currentSection.classList.remove('active');
        }
        
        // Remove active class from all nav links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        
        // Show new section
        const newSection = document.getElementById(sectionId);
        if (newSection) {
            newSection.classList.add('active');
            
            // Update active nav link
            const activeLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            this.currentSection = sectionId;
            window.location.hash = sectionId;
            
            // Close menu on mobile
            if (window.innerWidth < 992) {
                this.toggleMenu();
            }
            
            // Load section-specific data
            this.loadSectionData(sectionId);
        } else {
            // Fallback to home
            this.navigateTo('home');
        }
    }
    
    loadSectionData(sectionId) {
        switch(sectionId) {
            case 'projects':
                this.loadProjects();
                break;
            case 'notes':
                this.renderNotes();
                break;
            case 'skills':
                this.loadSkills();
                break;
            case 'contact':
                this.setupContactForm();
                break;
            case 'settings':
                this.renderSettings();
                break;
        }
    }
    
    handleHashChange() {
        const hash = window.location.hash.substring(1) || 'home';
        this.navigateTo(hash);
    }
    
    async syncData() {
        const syncBtn = document.getElementById('syncButton');
        syncBtn.classList.add('syncing');
        syncBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
        
        try {
            // Simulate sync process
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Update stats
            await this.updateStats();
            
            // Sync notes if online
            if (this.isOnline) {
                await this.syncNotesWithSupabase();
            }
            
            this.showToast('Daten erfolgreich synchronisiert', 'success');
        } catch (error) {
            console.error('Sync error:', error);
            this.showToast('Sync fehlgeschlagen', 'error');
        } finally {
            syncBtn.classList.remove('syncing');
            syncBtn.innerHTML = '<i class="fas fa-sync"></i>';
        }
    }
    
    async updateStats() {
        // Update project count
        const projectsCount = document.getElementById('projectsCount');
        if (projectsCount) {
            const current = parseInt(projectsCount.textContent) || 12;
            projectsCount.textContent = current + Math.floor(Math.random() * 3);
        }
        
        // Update commits count
        const commitsCount = document.getElementById('commitsCount');
        if (commitsCount) {
            const current = parseInt(commitsCount.textContent) || 245;
            commitsCount.textContent = current + Math.floor(Math.random() * 10);
        }
        
        // Update visitors count
        const visitorsCount = document.getElementById('visitorsCount');
        if (visitorsCount) {
            const current = parseFloat(visitorsCount.textContent) || 1.2;
            visitorsCount.textContent = (current + 0.1).toFixed(1) + 'k';
        }
    }
    
    async setupServiceWorker() {
        if ('serviceWorker' in navigator) {
            try {
                const registration = await navigator.serviceWorker.register('/service-worker.js');
                console.log('Service Worker registriert:', registration);
                
                // Check for updates
                registration.addEventListener('updatefound', () => {
                    const newWorker = registration.installing;
                    newWorker.addEventListener('statechange', () => {
                        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                            this.showToast('Neue Version verfügbar! Seite neu laden.', 'warning');
                        }
                    });
                });
            } catch (error) {
                console.error('Service Worker Registrierung fehlgeschlagen:', error);
            }
        }
    }
    
    showInstallPrompt() {
        if (this.isAppInstalled || !this.deferredPrompt) return;
        
        const installPrompt = document.getElementById('installPrompt');
        if (installPrompt) {
            installPrompt.classList.add('active');
            
            document.getElementById('installButton').addEventListener('click', () => this.installApp());
            document.getElementById('dismissInstall').addEventListener('click', () => this.hideInstallPrompt());
        }
    }
    
    hideInstallPrompt() {
        const installPrompt = document.getElementById('installPrompt');
        if (installPrompt) {
            installPrompt.classList.remove('active');
        }
    }
    
    async installApp() {
        if (!this.deferredPrompt) return;
        
        this.deferredPrompt.prompt();
        const { outcome } = await this.deferredPrompt.userChoice;
        
        if (outcome === 'accepted') {
            console.log('App installiert');
        }
        
        this.deferredPrompt = null;
        this.hideInstallPrompt();
    }
    
    checkInstallStatus() {
        // Check if app is installed
        if (window.matchMedia('(display-mode: standalone)').matches) {
            this.isAppInstalled = true;
            document.body.classList.add('standalone');
        }
        
        // Check for iOS standalone mode
        if (window.navigator.standalone === true) {
            this.isAppInstalled = true;
            document.body.classList.add('standalone');
        }
    }
    
    setupNetworkListener() {
        window.addEventListener('online', () => {
            this.isOnline = true;
            document.querySelector('.offline-indicator')?.classList.remove('active');
            this.showToast('Sie sind wieder online', 'success');
            
            // Auto-sync when back online
            if (this.settings.syncEnabled) {
                setTimeout(() => this.syncData(), 2000);
            }
        });
        
        window.addEventListener('offline', () => {
            this.isOnline = false;
            const offlineIndicator = document.querySelector('.offline-indicator');
            if (offlineIndicator) {
                offlineIndicator.classList.add('active');
            }
            this.showToast('Sie sind offline', 'warning');
        });
        
        // Initial check
        this.isOnline = navigator.onLine;
        if (!this.isOnline) {
            const offlineIndicator = document.querySelector('.offline-indicator');
            if (offlineIndicator) {
                offlineIndicator.classList.add('active');
            }
        }
    }
    
    showToast(message, type = 'info') {
        const toastContainer = document.getElementById('toastContainer') || this.createToastContainer();
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        const icons = {
            success: 'fas fa-check-circle',
            error: 'fas fa-exclamation-circle',
            warning: 'fas fa-exclamation-triangle',
            info: 'fas fa-info-circle'
        };
        
        toast.innerHTML = `
            <i class="${icons[type] || icons.info}"></i>
            <div class="toast-content">
                <h4>${type.charAt(0).toUpperCase() + type.slice(1)}</h4>
                <p>${message}</p>
            </div>
            <button class="toast-close">
                <i class="fas fa-times"></i>
            </button>
        `;
        
        toastContainer.appendChild(toast);
        
        // Auto-remove after 5 seconds
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, 5000);
        
        // Close button
        toast.querySelector('.toast-close').addEventListener('click', () => {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        });
    }
    
    createToastContainer() {
        const container = document.createElement('div');
        container.id = 'toastContainer';
        container.className = 'toast-container';
        document.body.appendChild(container);
        return container;
    }
    
    setupSwipeGestures() {
        if ('ontouchstart' in window) {
            let touchStartX = 0;
            let touchEndX = 0;
            
            document.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            document.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                this.handleSwipe(touchStartX, touchEndX);
            });
        }
    }
    
    handleSwipe(startX, endX) {
        const minSwipeDistance = 50;
        const distance = startX - endX;
        
        if (Math.abs(distance) < minSwipeDistance) return;
        
        if (distance > 0 && startX < 50) {
            // Swipe right from left edge - open menu
            this.toggleMenu();
        } else if (distance < 0 && endX > window.innerWidth - 50) {
            // Swipe left from right edge - close menu
            if (document.getElementById('sidebar').classList.contains('active')) {
                this.toggleMenu();
            }
        }
    }
    
    handleResize() {
        // Close menu on resize to desktop if open
        if (window.innerWidth >= 992 && document.getElementById('sidebar').classList.contains('active')) {
            this.toggleMenu();
        }
    }
    
    setupQuickNote() {
        const quickNoteBtn = document.getElementById('quickNoteBtn');
        if (quickNoteBtn) {
            quickNoteBtn.addEventListener('click', () => this.openQuickNoteModal());
        }
    }
    
    openQuickNoteModal() {
        // Create or show modal
        let modal = document.getElementById('quickNoteModal');
        if (!modal) {
            modal = this.createQuickNoteModal();
        }
        
        modal.classList.add('active');
        document.getElementById('noteTitle')?.focus();
    }
    
    createQuickNoteModal() {
        const modal = document.createElement('div');
        modal.id = 'quickNoteModal';
        modal.className = 'modal';
        
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-sticky-note"></i> Schnellnotiz</h3>
                    <button class="modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="noteTitle">Titel</label>
                        <input type="text" id="noteTitle" placeholder="Titel der Notiz" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="noteContent">Inhalt</label>
                        <textarea id="noteContent" rows="6" placeholder="Notizinhalt..." class="form-control"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="noteColor">Farbe</label>
                        <select id="noteColor" class="form-control">
                            <option value="#4f46e5">Blau</option>
                            <option value="#10b981">Grün</option>
                            <option value="#f59e0b">Orange</option>
                            <option value="#ef4444">Rot</option>
                            <option value="#8b5cf6">Lila</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="saveNote">
                            <i class="fas fa-save"></i> Speichern
                        </button>
                        <button class="btn btn-outline" id="cancelNote">
                            Abbrechen
                        </button>
                    </div>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // Add event listeners
        modal.querySelector('.modal-close').addEventListener('click', () => {
            modal.classList.remove('active');
        });
        
        modal.querySelector('#cancelNote').addEventListener('click', () => {
            modal.classList.remove('active');
        });
        
        modal.querySelector('#saveNote').addEventListener('click', () => {
            this.saveQuickNote();
            modal.classList.remove('active');
        });
        
        // Close on overlay click
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('active');
            }
        });
        
        return modal;
    }
    
    saveQuickNote() {
        const title = document.getElementById('noteTitle').value.trim();
        const content = document.getElementById('noteContent').value.trim();
        const color = document.getElementById('noteColor').value;
        
        if (!title || !content) {
            this.showToast('Bitte Titel und Inhalt eingeben', 'warning');
            return;
        }
        
        const note = {
            id: Date.now().toString(),
            title,
            content,
            color,
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString()
        };
        
        this.notes.unshift(note);
        this.saveNotes();
        this.showToast('Notiz gespeichert', 'success');
        
        // Clear form
        document.getElementById('noteTitle').value = '';
        document.getElementById('noteContent').value = '';
        
        // Navigate to notes section if not already there
        if (this.currentSection !== 'notes') {
            this.navigateTo('notes');
        }
    }
    
    saveNotes() {
        localStorage.setItem('app-notes', JSON.stringify(this.notes));
    }
    
    loadNotes() {
        const savedNotes = localStorage.getItem('app-notes');
        if (savedNotes) {
            this.notes = JSON.parse(savedNotes);
        }
    }
    
    renderNotes() {
        const notesSection = document.getElementById('notes');
        if (!notesSection) return;
        
        // Create notes container if it doesn't exist
        let notesContainer = document.getElementById('notesContainer');
        if (!notesContainer) {
            notesContainer = document.createElement('div');
            notesContainer.id = 'notesContainer';
            notesContainer.className = 'notes-container';
            
            const header = document.createElement('div');
            header.className = 'section-header';
            header.innerHTML = '<h2><i class="fas fa-sticky-note"></i> Notizen</h2>';
            
            const actions = document.createElement('div');
            actions.className = 'notes-actions';
            actions.innerHTML = `
                <button class="btn btn-primary" id="addNoteBtn">
                    <i class="fas fa-plus"></i> Neue Notiz
                </button>
                <button class="btn btn-outline" id="deleteAllNotes">
                    <i class="fas fa-trash"></i> Alle löschen
                </button>
            `;
            
            notesSection.appendChild(header);
            notesSection.appendChild(actions);
            notesSection.appendChild(notesContainer);
            
            // Add event listeners
            document.getElementById('addNoteBtn').addEventListener('click', () => this.openQuickNoteModal());
            document.getElementById('deleteAllNotes').addEventListener('click', () => this.deleteAllNotes());
        }
        
        // Render notes
        notesContainer.innerHTML = '';
        
        if (this.notes.length === 0) {
            notesContainer.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-sticky-note fa-3x"></i>
                    <h3>Keine Notizen</h3>
                    <p>Erstelle deine erste Notiz</p>
                    <button class="btn btn-primary" id="createFirstNote">
                        <i class="fas fa-plus"></i> Notiz erstellen
                    </button>
                </div>
            `;
            
            document.getElementById('createFirstNote').addEventListener('click', () => this.openQuickNoteModal());
            return;
        }
        
        this.notes.forEach(note => {
            const noteElement = document.createElement('div');
            noteElement.className = 'note-card';
            noteElement.style.borderLeftColor = note.color;
            
            const date = new Date(note.createdAt).toLocaleDateString('de-DE', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
            
            noteElement.innerHTML = `
                <div class="note-header">
                    <h4>${this.escapeHtml(note.title)}</h4>
                    <div class="note-actions">
                        <button class="note-action edit-note" data-id="${note.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="note-action delete-note" data-id="${note.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                <div class="note-content">
                    <p>${this.escapeHtml(note.content).replace(/\n/g, '<br>')}</p>
                </div>
                <div class="note-footer">
                    <span class="note-date">
                        <i class="far fa-calendar"></i> ${date}
                    </span>
                    <span class="note-color" style="background-color: ${note.color}"></span>
                </div>
            `;
            
            notesContainer.appendChild(noteElement);
        });
        
        // Add event listeners to note actions
        document.querySelectorAll('.edit-note').forEach(btn => {
            btn.addEventListener('click', (e) => this.editNote(e.target.closest('button').dataset.id));
        });
        
        document.querySelectorAll('.delete-note').forEach(btn => {
            btn.addEventListener('click', (e) => this.deleteNote(e.target.closest('button').dataset.id));
        });
    }
    
    editNote(noteId) {
        const note = this.notes.find(n => n.id === noteId);
        if (!note) return;
        
        const modal = this.createQuickNoteModal();
        modal.classList.add('active');
        
        document.getElementById('noteTitle').value = note.title;
        document.getElementById('noteContent').value = note.content;
        document.getElementById('noteColor').value = note.color;
        
        // Update save button
        const saveBtn = document.getElementById('saveNote');
        saveBtn.innerHTML = '<i class="fas fa-save"></i> Aktualisieren';
        saveBtn.onclick = () => {
            note.title = document.getElementById('noteTitle').value.trim();
            note.content = document.getElementById('noteContent').value.trim();
            note.color = document.getElementById('noteColor').value;
            note.updatedAt = new Date().toISOString();
            
            this.saveNotes();
            this.renderNotes();
            modal.classList.remove('active');
            this.showToast('Notiz aktualisiert', 'success');
        };
    }
    
    deleteNote(noteId) {
        if (confirm('Möchten Sie diese Notiz wirklich löschen?')) {
            this.notes = this.notes.filter(n => n.id !== noteId);
            this.saveNotes();
            this.renderNotes();
            this.showToast('Notiz gelöscht', 'success');
        }
    }
    
    deleteAllNotes() {
        if (this.notes.length === 0) return;
        
        if (confirm('Möchten Sie wirklich alle Notizen löschen?')) {
            this.notes = [];
            this.saveNotes();
            this.renderNotes();
            this.showToast('Alle Notizen gelöscht', 'success');
        }
    }
    
    escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    saveSettings() {
        localStorage.setItem('app-settings', JSON.stringify(this.settings));
    }
    
    loadSettings() {
        const savedSettings = localStorage.getItem('app-settings');
        if (savedSettings) {
            this.settings = { ...this.settings, ...JSON.parse(savedSettings) };
        }
    }
    
    renderSettings() {
        const settingsSection = document.getElementById('settings');
        if (!settingsSection) return;
        
        let settingsContainer = document.getElementById('settingsContainer');
        if (!settingsContainer) {
            settingsContainer = document.createElement('div');
            settingsContainer.id = 'settingsContainer';
            settingsContainer.className = 'settings-container';
            
            settingsContainer.innerHTML = `
                <div class="settings-group">
                    <h3><i class="fas fa-palette"></i> Darstellung</h3>
                    <div class="setting-item">
                        <label for="themeSelect">Theme</label>
                        <select id="themeSelect" class="form-control">
                            <option value="light">Hell</option>
                            <option value="dark">Dunkel</option>
                            <option value="auto">Automatisch</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3><i class="fas fa-bell"></i> Benachrichtigungen</h3>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="notificationsToggle">
                            <span class="slider"></span>
                        </label>
                        <span>Push-Benachrichtigungen aktivieren</span>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3><i class="fas fa-sync"></i> Synchronisation</h3>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="syncToggle">
                            <span class="slider"></span>
                        </label>
                        <span>Automatische Synchronisation</span>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3><i class="fas fa-database"></i> Datenspeicherung</h3>
                    <div class="setting-item">
                        <button class="btn btn-outline" id="clearCache">
                            <i class="fas fa-trash"></i> Cache leeren
                        </button>
                        <button class="btn btn-outline" id="exportData">
                            <i class="fas fa-download"></i> Daten exportieren
                        </button>
                        <button class="btn btn-outline" id="importData">
                            <i class="fas fa-upload"></i> Daten importieren
                        </button>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3><i class="fas fa-info-circle"></i> Informationen</h3>
                    <div class="info-item">
                        <strong>App Version</strong>
                        <span>2.0.0</span>
                    </div>
                    <div class="info-item">
                        <strong>Service Worker</strong>
                        <span id="swStatus">Prüfe...</span>
                    </div>
                    <div class="info-item">
                        <strong>Speicherverbrauch</strong>
                        <span id="storageInfo">Berechne...</span>
                    </div>
                </div>
                
                <div class="settings-actions">
                    <button class="btn btn-primary" id="saveSettings">
                        <i class="fas fa-save"></i> Einstellungen speichern
                    </button>
                    <button class="btn btn-outline" id="resetSettings">
                        <i class="fas fa-undo"></i> Zurücksetzen
                    </button>
                </div>
            `;
            
            settingsSection.appendChild(settingsContainer);
            
            // Set initial values
            document.getElementById('themeSelect').value = this.settings.theme === 'auto' ? 'auto' : this.settings.theme;
            document.getElementById('notificationsToggle').checked = this.settings.notifications;
            document.getElementById('syncToggle').checked = this.settings.syncEnabled;
            
            // Add event listeners
            document.getElementById('saveSettings').addEventListener('click', () => this.saveCurrentSettings());
            document.getElementById('resetSettings').addEventListener('click', () => this.resetSettings());
            document.getElementById('clearCache').addEventListener('click', () => this.clearCache());
            document.getElementById('exportData').addEventListener('click', () => this.exportData());
            document.getElementById('importData').addEventListener('click', () => this.importData());
            
            // Check service worker status
            this.checkServiceWorkerStatus();
            
            // Calculate storage
            this.calculateStorage();
        }
    }
    
    saveCurrentSettings() {
        this.settings.theme = document.getElementById('themeSelect').value;
        this.settings.notifications = document.getElementById('notificationsToggle').checked;
        this.settings.syncEnabled = document.getElementById('syncToggle').checked;
        
        this.saveSettings();
        
        // Apply theme if not auto
        if (this.settings.theme !== 'auto') {
            document.documentElement.setAttribute('data-theme', this.settings.theme);
            const themeIcon = document.querySelector('#themeToggle i');
            themeIcon.className = this.settings.theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
        }
        
        this.showToast('Einstellungen gespeichert', 'success');
    }
    
    resetSettings() {
        if (confirm('Möchten Sie alle Einstellungen zurücksetzen?')) {
            this.settings = {
                theme: 'light',
                notifications: true,
                syncEnabled: true,
                offlineMode: true
            };
            
            localStorage.removeItem('app-settings');
            this.renderSettings();
            this.showToast('Einstellungen zurückgesetzt', 'success');
        }
    }
    
    async clearCache() {
        if (confirm('Möchten Sie wirklich den Cache leeren?')) {
            try {
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    await Promise.all(cacheNames.map(cacheName => caches.delete(cacheName)));
                }
                
                // Clear localStorage except settings and notes
                const settings = localStorage.getItem('app-settings');
                const notes = localStorage.getItem('app-notes');
                
                localStorage.clear();
                
                if (settings) localStorage.setItem('app-settings', settings);
                if (notes) localStorage.setItem('app-notes', notes);
                
                this.showToast('Cache erfolgreich geleert', 'success');
                
                // Reload to re-register service worker
                setTimeout(() => location.reload(), 1000);
            } catch (error) {
                console.error('Cache clearing failed:', error);
                this.showToast('Cache konnte nicht geleert werden', 'error');
            }
        }
    }
    
    exportData() {
        const data = {
            notes: this.notes,
            settings: this.settings,
            exportDate: new Date().toISOString()
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = `matthias-app-backup-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        this.showToast('Daten exportiert', 'success');
    }
    
    importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'application/json';
        
        input.onchange = (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    if (data.notes) {
                        this.notes = data.notes;
                        this.saveNotes();
                    }
                    
                    if (data.settings) {
                        this.settings = data.settings;
                        this.saveSettings();
                    }
                    
                    this.showToast('Daten erfolgreich importiert', 'success');
                    setTimeout(() => location.reload(), 1000);
                } catch (error) {
                    console.error('Import error:', error);
                    this.showToast('Ungültige Datei', 'error');
                }
            };
            
            reader.readAsText(file);
        };
        
        input.click();
    }
    
    async checkServiceWorkerStatus() {
        const statusElement = document.getElementById('swStatus');
        if (!statusElement) return;
        
        if ('serviceWorker' in navigator) {
            const registration = await navigator.serviceWorker.ready;
            if (registration) {
                statusElement.textContent = 'Aktiv';
                statusElement.style.color = '#10b981';
            } else {
                statusElement.textContent = 'Inaktiv';
                statusElement.style.color = '#ef4444';
            }
        } else {
            statusElement.textContent = 'Nicht unterstützt';
            statusElement.style.color = '#6b7280';
        }
    }
    
    calculateStorage() {
        const storageElement = document.getElementById('storageInfo');
        if (!storageElement) return;
        
        let total = 0;
        
        // Calculate localStorage usage
        for (let key in localStorage) {
            if (localStorage.hasOwnProperty(key)) {
                total += localStorage[key].length * 2; // UTF-16
            }
        }
        
        // Calculate IndexedDB usage (approximate)
        if ('indexedDB' in window) {
            // IndexedDB calculation would be more complex
            total += 0; // Placeholder
        }
        
        const mb = (total / 1024 / 1024).toFixed(2);
        storageElement.textContent = `${mb} MB`;
        
        // Update storage bar
        const progressElement = document.getElementById('storageProgress');
        const storageUsedElement = document.getElementById('storageUsed');
        
        if (progressElement && storageUsedElement) {
            const percentage = Math.min((mb / 50) * 100, 100);
            progressElement.style.width = `${percentage}%`;
            storageUsedElement.textContent = `${mb} MB`;
        }
    }
    
    loadProjects() {
        // Implement projects loading
        console.log('Loading projects...');
    }
    
    loadSkills() {
        // Implement skills loading
        console.log('Loading skills...');
    }
    
    setupContactForm() {
        // Implement contact form
        console.log('Setting up contact form...');
    }
    
    // Global functions for HTML onclick handlers
    downloadCV() {
        this.showToast('Lebenslauf wird heruntergeladen...', 'info');
        // Simulate download
        setTimeout(() => {
            const link = document.createElement('a');
            link.href = 'https://matthias-silberhain.github.io/matthias-silberhain/bilder/Lebenslauf.pdf';
            link.download = 'Matthias_Silberhain_Lebenslauf.pdf';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }, 1000);
    }
    
    shareProfile() {
        if (navigator.share) {
            navigator.share({
                title: 'Matthias Silberhain Portfolio',
                text: 'Schau dir mein Portfolio an!',
                url: window.location.href
            });
        } else {
            // Fallback: copy to clipboard
            navigator.clipboard.writeText(window.location.href);
            this.showToast('Link in Zwischenablage kopiert', 'success');
        }
    }
}

// Initialize app when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.app = new MatthiasApp();
});

// Add missing styles for new elements
const additionalStyles = document.createElement('style');
additionalStyles.textContent = `
    .notes-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1rem;
        margin-top: 2rem;
    }
    
    .note-card {
        background-color: var(--bg-card);
        border-left: 4px solid var(--primary-color);
        border-radius: var(--radius-md);
        padding: 1rem;
        box-shadow: var(--shadow-sm);
        transition: var(--transition);
    }
    
    .note-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
    
    .note-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 0.5rem;
    }
    
    .note-header h4 {
        font-size: 1rem;
        font-weight: 600;
        margin: 0;
        flex: 1;
    }
    
    .note-actions {
        display: flex;
        gap: 0.25rem;
    }
    
    .note-action {
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0.25rem;
        border-radius: var(--radius-sm);
        font-size: 0.875rem;
    }
    
    .note-action:hover {
        color: var(--primary-color);
        background-color: var(--bg-secondary);
    }
    
    .note-content {
        margin-bottom: 0.75rem;
    }
    
    .note-content p {
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin: 0;
        line-height: 1.5;
    }
    
    .note-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.75rem;
        color: var(--text-secondary);
    }
    
    .note-color {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }
    
    .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        color: var(--text-secondary);
        grid-column: 1 / -1;
    }
    
    .empty-state i {
        margin-bottom: 1rem;
        opacity: 0.5;
    }
    
    .empty-state h3 {
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
    }
    
    .settings-container {
        max-width: 800px;
    }
    
    .settings-group {
        background-color: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border: 1px solid var(--border-color);
    }
    
    .settings-group h3 {
        font-size: 1.125rem;
        margin-bottom: 1rem;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .setting-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }
    
    .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
    }
    
    .switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 24px;
    }
    
    .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    
    input:checked + .slider {
        background-color: var(--primary-color);
    }
    
    input:checked + .slider:before {
        transform: translateX(26px);
    }
    
    .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border-color);
    }
    
    .info-item:last-child {
        border-bottom: none;
    }
    
    .form-group {
        margin-bottom: 1rem;
    }
    
    .form-control {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        background-color: var(--bg-primary);
        color: var(--text-primary);
        font-family: inherit;
        font-size: 1rem;
        transition: var(--transition);
    }
    
    .form-control:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }
    
    label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--text-primary);
    }
    
    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .syncing i {
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .notes-actions {
        display: flex;
        gap: 1rem;
        margin: 1rem 0;
    }
    
    .settings-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }
`;
document.head.appendChild(additionalStyles);
